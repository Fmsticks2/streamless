{"version":3,"file":"Client.js","sourceRoot":"","sources":["../../../src/web3/Client.ts"],"names":[],"mappings":";;;AACA,yDAAsD;AACtD,uDAAoD;AACpD,iDAA8C;AAC9C,iEAA8D;AAC9D,uDAAkE;AAKlE;;GAEG;AACH,MAAa,MAAM;IAaP;IAZF,eAAe,CAAkB;IACjC,gBAAgB,CAAmB;IACnC,YAAY,CAAe;IAC3B,oBAAoB,CAAuB;IAEnD;;;;;OAKG;IACH,YACU,YAA2B,EACnC,WAA0B,EAC1B,eAAiC;QAFzB,iBAAY,GAAZ,YAAY,CAAe;QAInC,IAAI,CAAC,eAAe,GAAG,eAAe,IAAI,IAAI,iCAAe,CAAC,YAAY,CAAC,CAAC;QAC5E,IAAI,CAAC,gBAAgB,GAAG,IAAI,mCAAgB,CAAC,YAAY,CAAC,CAAC;QAC3D,IAAI,CAAC,YAAY,GAAG,IAAI,2BAAY,CAClC,YAAY,EACZ,IAAI,CAAC,eAAe,EACpB,WAAW,CACZ,CAAC;QACF,IAAI,CAAC,oBAAoB,GAAG,IAAI,2CAAoB,CAClD,YAAY,EACZ,IAAI,CAAC,eAAe,EACpB,IAAI,CAAC,YAAY,CAClB,CAAC;QAEF,aAAa;QACb,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrD,UAAU;QACV,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7D,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnE,UAAU;QACV,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACjD,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/D,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC/D,CAAC;IAED;;;;OAIG;IACI,UAAU;QACf,OAAO,IAAI,CAAC,gBAAgB,CAAC;IAC/B,CAAC;IAED;;;;OAIG;IACI,SAAS;QACd,OAAO,IAAI,CAAC,eAAe,CAAC;IAC9B,CAAC;IAED;;;;OAIG;IACI,MAAM;QACX,OAAO,IAAI,CAAC,YAAY,CAAC;IAC3B,CAAC;IAED;;;;OAIG;IACI,cAAc;QACnB,OAAO,IAAI,CAAC,oBAAoB,CAAC;IACnC,CAAC;IAED;;;;OAIG;IACI,kBAAkB,CAAC,SAA2B;QACnD,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;QAC7C,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;QAC9C,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;QAC1C,IAAI,CAAC,oBAAoB,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;IACpD,CAAC;IAED;;;;OAIG;IACI,YAAY;QACjB,OAAO,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC;IACrC,CAAC;IAED;;;;OAIG;IACI,mBAAmB;QACxB,OAAO,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,MAAM,CACvC,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,KAAK,wBAAY,CAAC,OAAO,CACrD,CAAC;IACJ,CAAC;IAED;;;;OAIG;IACI,kBAAkB;QACvB,OAAO,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,MAAM,CACvC,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,KAAK,wBAAY,CAAC,MAAM,CACpD,CAAC;IACJ,CAAC;IAED;;;;OAIG;IACI,qBAAqB,CAAC,QAA6B;QACxD,MAAM,SAAS,GAAG;YAChB;gBACE,GAAG,EAAE,QAAQ;gBACb,IAAI,EAAE,wBAAY,CAAC,MAAM;aACb;YACd;gBACE,GAAG,EAAE,QAAQ;gBACb,IAAI,EAAE,wBAAY,CAAC,OAAO;aACd;SACf,CAAC;QACF,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;QAC7C,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;QAC9C,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;QAC1C,IAAI,CAAC,oBAAoB,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;IACpD,CAAC;CACF;AAhJD,wBAgJC","sourcesContent":["import { IClientConfig } from '../interfaces/IClientConfig';\nimport { PrivateApiClient } from './PrivateApiClient';\nimport { PublicApiClient } from './PublicApiClient';\nimport { WalletClient } from './WalletClient';\nimport { SmartContractsClient } from './SmartContractsClient';\nimport { IProvider, ProviderType } from '../interfaces/IProvider';\nimport { DefaultProviderUrls } from './ClientFactory';\nimport { IClient } from '../interfaces/IClient';\nimport { IBaseAccount } from '../interfaces/IBaseAccount';\n\n/**\n * Massa Web3 Client object wraps all public, private, wallet and smart-contracts-related functionalities.\n */\nexport class Client implements IClient {\n  private publicApiClient: PublicApiClient;\n  private privateApiClient: PrivateApiClient;\n  private walletClient: WalletClient;\n  private smartContractsClient: SmartContractsClient;\n\n  /**\n   * Constructor of the Client class.\n   *\n   * @param clientConfig - client configuration object.\n   * @param baseAccount - base account to use for signing transactions (optional).\n   */\n  public constructor(\n    private clientConfig: IClientConfig,\n    baseAccount?: IBaseAccount,\n    publicApiClient?: PublicApiClient,\n  ) {\n    this.publicApiClient = publicApiClient || new PublicApiClient(clientConfig);\n    this.privateApiClient = new PrivateApiClient(clientConfig);\n    this.walletClient = new WalletClient(\n      clientConfig,\n      this.publicApiClient,\n      baseAccount,\n    );\n    this.smartContractsClient = new SmartContractsClient(\n      clientConfig,\n      this.publicApiClient,\n      this.walletClient,\n    );\n\n    // subclients\n    this.privateApi = this.privateApi.bind(this);\n    this.publicApi = this.publicApi.bind(this);\n    this.wallet = this.wallet.bind(this);\n    this.smartContracts = this.smartContracts.bind(this);\n    // setters\n    this.setCustomProviders = this.setCustomProviders.bind(this);\n    this.setNewDefaultProvider = this.setNewDefaultProvider.bind(this);\n    // getters\n    this.getProviders = this.getProviders.bind(this);\n    this.getPrivateProviders = this.getPrivateProviders.bind(this);\n    this.getPublicProviders = this.getPublicProviders.bind(this);\n  }\n\n  /**\n   * Get the private api related RPC methods.\n   *\n   * @returns PrivateApiClient object.\n   */\n  public privateApi(): PrivateApiClient {\n    return this.privateApiClient;\n  }\n\n  /**\n   * Get the public api related RPC methods.\n   *\n   * @returns PublicApiClient object.\n   */\n  public publicApi(): PublicApiClient {\n    return this.publicApiClient;\n  }\n\n  /**\n   * Get the Wallet related methods.\n   *\n   * @returns WalletClient object.\n   */\n  public wallet(): WalletClient {\n    return this.walletClient;\n  }\n\n  /**\n   * Get the smart Contracts related methods.\n   *\n   * @returns SmartContractsClient object.\n   */\n  public smartContracts(): SmartContractsClient {\n    return this.smartContractsClient;\n  }\n\n  /**\n   * Set new providers.\n   *\n   * @param providers - array of providers to set.\n   */\n  public setCustomProviders(providers: Array<IProvider>): void {\n    this.publicApiClient.setProviders(providers);\n    this.privateApiClient.setProviders(providers);\n    this.walletClient.setProviders(providers);\n    this.smartContractsClient.setProviders(providers);\n  }\n\n  /**\n   * Get the currently set providers.\n   *\n   * @returns array of the known providers.\n   */\n  public getProviders(): Array<IProvider> {\n    return this.clientConfig.providers;\n  }\n\n  /**\n   * Get all private providers.\n   *\n   * @returns all private providers.\n   */\n  public getPrivateProviders(): Array<IProvider> {\n    return this.clientConfig.providers.filter(\n      (provider) => provider.type === ProviderType.PRIVATE,\n    );\n  }\n\n  /**\n   * Get all public providers\n   *\n   * @returns all public providers\n   */\n  public getPublicProviders(): Array<IProvider> {\n    return this.clientConfig.providers.filter(\n      (provider) => provider.type === ProviderType.PUBLIC,\n    );\n  }\n\n  /**\n   * Set a new default json rpc provider.\n   *\n   * @param provider - The new default provider to set.\n   */\n  public setNewDefaultProvider(provider: DefaultProviderUrls): void {\n    const providers = [\n      {\n        url: provider,\n        type: ProviderType.PUBLIC,\n      } as IProvider,\n      {\n        url: provider,\n        type: ProviderType.PRIVATE,\n      } as IProvider,\n    ];\n    this.publicApiClient.setProviders(providers);\n    this.privateApiClient.setProviders(providers);\n    this.walletClient.setProviders(providers);\n    this.smartContractsClient.setProviders(providers);\n  }\n}\n"]}