{"version":3,"file":"WalletProviderAccount.js","sourceRoot":"","sources":["../../../../src/web3/accounts/WalletProviderAccount.ts"],"names":[],"mappings":";;;AAOA,sDAA6C;AAE7C,MAAa,qBAAqB;IACxB,OAAO,CAAW;IAC1B,YAAY,OAAiB;QAC3B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IACzB,CAAC;IAEM,KAAK,CAAC,IAAI,CAAC,IAAkC;QAClD,IAAI,IAAI,YAAY,UAAU,EAAE;YAC9B,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC1B;QAED,MAAM,aAAa,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEpD,OAAO;YACL,SAAS,EAAE,aAAa,CAAC,SAAS;YAClC,aAAa,EAAE,aAAa,CAAC,aAAa;SAC3C,CAAC;IACJ,CAAC;IAEM,OAAO;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IAChC,CAAC;IAEM,KAAK,CAAC,SAAS,CAAC,SAAqB;QAC1C,IAAI,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,CAAC,CAAC;QACxE,OAAO,GAAG,CAAC,WAAW,CAAC;IACzB,CAAC;IAEM,KAAK,CAAC,QAAQ,CAAC,SAAqB;QACzC,IAAI,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,CAAC,CAAC;QACvE,OAAO,GAAG,CAAC,WAAW,CAAC;IACzB,CAAC;IAEM,KAAK,CAAC,eAAe,CAAC,MAAwB;QACnD,IAAI,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,eAAe,CAC1C,MAAM,CAAC,MAAM,EACb,MAAM,CAAC,gBAAgB,EACvB,MAAM,CAAC,GAAG,CACX,CAAC;QACF,OAAO,GAAG,CAAC,WAAW,CAAC;IACzB,CAAC;IAEM,KAAK,CAAC,iBAAiB,CAAC,QAAmB;QAChD,IAAI,MAAM,GAAoB,QAAQ,CAAC,SAAS,CAAC;QACjD,IAAI,WAA8B,CAAC;QAEnC,IAAI,MAAM,YAAY,KAAK,EAAE;YAC3B,WAAW,GAAG,IAAI,UAAU,CAAC,MAAM,CAAC,CAAC;SACtC;QACD,IAAI,MAAM,YAAY,iBAAI,EAAE;YAC1B,WAAW,GAAG,MAAM,CAAC;SACtB;QAED,IAAI,GAAG,GAAG,CAAC,MAAM,IAAI,CAAC,OAAO,CAAC,MAAM,CAClC,QAAQ,CAAC,aAAa,EACtB,QAAQ,CAAC,YAAY,EACrB,WAAW,EACX,QAAQ,CAAC,KAAK,EACd,QAAQ,CAAC,GAAG,EACZ,QAAQ,CAAC,MAAM,EACf,KAAK,CACN,CAAwB,CAAC;QAE1B,OAAO,GAAG,CAAC,WAAW,CAAC;IACzB,CAAC;IAED,6DAA6D;IACtD,KAAK,CAAC,mBAAmB,CAAC,CAAgB;QAC/C,MAAM,IAAI,KAAK,CACb,iFAAiF,CAClF,CAAC;IACJ,CAAC;IAEM,KAAK,CAAC,MAAM;QACjB,OAAO;IACT,CAAC;CACF;AA5ED,sDA4EC","sourcesContent":["import { IBaseAccount } from '../../interfaces/IBaseAccount';\nimport { IAccount, ITransactionDetails } from '@massalabs/wallet-provider';\nimport { ISignature } from '../../interfaces/ISignature';\nimport { IRollsData } from '../../interfaces/IRollsData';\nimport { ITransactionData } from '../../interfaces/ITransactionData';\nimport { ICallData } from '../../interfaces/ICallData';\nimport { IContractData } from '../../interfaces/IContractData';\nimport { Args } from '@massalabs/web3-utils';\n\nexport class WalletProviderAccount implements IBaseAccount {\n  private account: IAccount;\n  constructor(account: IAccount) {\n    this.account = account;\n  }\n\n  public async sign(data: Buffer | Uint8Array | string): Promise<ISignature> {\n    if (data instanceof Uint8Array) {\n      data = Buffer.from(data);\n    }\n\n    const signatureData = await this.account.sign(data);\n\n    return {\n      publicKey: signatureData.publicKey,\n      base58Encoded: signatureData.base58Encoded,\n    };\n  }\n\n  public address(): string {\n    return this.account.address();\n  }\n\n  public async sellRolls(rollsData: IRollsData): Promise<string> {\n    let res = await this.account.sellRolls(rollsData.amount, rollsData.fee);\n    return res.operationId;\n  }\n\n  public async buyRolls(rollsData: IRollsData): Promise<string> {\n    let res = await this.account.buyRolls(rollsData.amount, rollsData.fee);\n    return res.operationId;\n  }\n\n  public async sendTransaction(txData: ITransactionData): Promise<string> {\n    let res = await this.account.sendTransaction(\n      txData.amount,\n      txData.recipientAddress,\n      txData.fee,\n    );\n    return res.operationId;\n  }\n\n  public async callSmartContract(callData: ICallData): Promise<string> {\n    let params: number[] | Args = callData.parameter;\n    let paramToSend: Uint8Array | Args;\n\n    if (params instanceof Array) {\n      paramToSend = new Uint8Array(params);\n    }\n    if (params instanceof Args) {\n      paramToSend = params;\n    }\n\n    let res = (await this.account.callSC(\n      callData.targetAddress,\n      callData.functionName,\n      paramToSend,\n      callData.coins,\n      callData.fee,\n      callData.maxGas,\n      false,\n    )) as ITransactionDetails;\n\n    return res.operationId;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public async deploySmartContract(_: IContractData): Promise<string> {\n    throw new Error(\n      'deploySmartContract with an account from WalletProvider is not implemented yet.',\n    );\n  }\n\n  public async verify(): Promise<void> {\n    return;\n  }\n}\n"]}